<div class="rw-trips-new">
  <h1 class="rw-title">Adjust your trip</h1>

  <%= form_with model: @trip, class: "rw-form", data: { turbo: false, controller: "loading", action: "submit->loading#submit" } do |f| %>
    <% if @trip.errors.any? %>
      <div class="rw-errors">
        <ul>
          <% @trip.errors.full_messages.each do |msg| %>
            <li><%= msg %></li>
          <% end %>
        </ul>
      </div>
    <% end %>

    <div class="rw-grid">
      <!-- LEFT COLUMN -->
      <div class="rw-col">
        <div class="rw-field">
          <%= f.label :city, "Location", class: "rw-label" %>
          <%= f.text_field :city, placeholder: "City", class: "rw-input" %>
        </div>

        <div class="rw-field">
          <%= f.label :departure, "Departure:", class: "rw-label" %>
          <%= f.text_field :departure, placeholder: "City", class: "rw-input" %>
        </div>

        <div class="rw-field">
          <span class="rw-label">Travel Dates</span>
          <div class="rw-row">
            <%= f.date_field :start_date, class: "rw-input" %>
            <%= f.date_field :end_date, class: "rw-input" %>
          </div>
        </div>

        <div class="rw-field">
          <%= f.label :budget, "Budget:", class: "rw-label" %>
          <%= f.number_field :budget, step: 1, placeholder: "2000", class: "rw-input" %>
        </div>

        <div class="rw-field">
          <%= f.label :people, "People:", class: "rw-label" %>
          <%= f.select :people, (1..10), {}, class: "rw-select" %>
        </div>

        <div class="rw-actions">
          <%= link_to "Cancel", trip_path(@trip), class: "rw-btn rw-btn--secondary" %>
          <%= f.submit "Submit", class: "rw-btn rw-btn--primary" %>
        </div>
      </div>

      <!-- RIGHT COLUMN -->
      <div class="rw-col">
        <div class="rw-field">
          <span class="rw-label">Preferences</span>

          <div class="rw-checks">
            <% @preferences.each do |pref| %>
              <label class="rw-check">
                <%= check_box_tag "trip[preference_ids][]",
                      pref.id,
                      @trip.preference_ids.include?(pref.id),
                      class: "rw-checkbox" %>
                <span><%= pref.name %></span>
              </label>
            <% end %>
          </div>
        </div>

        <div class="rw-field">
          <span class="rw-label">Further preferences</span>
          <%= f.text_area :further_preferences,
                placeholder: "put all your further preferences here",
                rows: 6,
                class: "rw-textarea" %>
        </div>
      </div>
    </div>
  <% end %>
</div>
